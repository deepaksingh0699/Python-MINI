<!DOCTYPE html>
<html>
<head>
    <title>Typing Speed Test</title>
    <style>
        textarea { width: 100%; height: 150px; font-size: 18px; }
        button { padding: 10px 20px; font-size: 16px; }
        .result { margin-top: 20px; font-size: 18px; }
    </style>
</head>
<body>
    <h1>Typing Speed Test</h1>
    <form method="post" onsubmit="setEndTime()">
        <textarea name="typedText" placeholder="Start typing here..." onfocus="setStartTime()"></textarea>
        <input type="hidden" name="startTime" id="startTime">
        <button type="submit">Submit</button>
    </form>

    {% if result %}
    <div class="result">
        <p><strong>Total Words:</strong> {{ result.word_count }}</p>
        <p><strong>Time Taken:</strong> {{ result.time_taken }} seconds</p>
        <p><strong>Speed:</strong> {{ result.wpm }} words per minute</p>
    </div>
    {% endif %}

    <script>
        let startTime = 0;

        function setStartTime() {
            if (startTime === 0) {
                startTime = Date.now() / 1000;
                document.getElementById("startTime").value = startTime;
            }
        }

        function setEndTime() {
            // Form submit will handle time difference in backend
        }
    </script>
</body>
</html>
